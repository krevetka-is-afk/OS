# ИДЗ 1. Каналы. Очереди сообщений.

**Растворов Сергей Евгеньевич БПИ236**

**Вариант 29**

## Описание

Данная программа предназначена для определения частоты встречаемости пяти ключевых слов языка программирования C 
в произвольной ASCII-строке. Программа принимает на вход имя файла с текстом и имя файла для записи результатов 
через аргументы командной строки. Ключевые слова не должны являться частью идентификаторов.

**Внимание:** Выбраны следующие пять ключевых слов языка C: `{"int", "return", "char", "while", "for"}`, для того, 
чтобы запустить тесты для всех директорий выполните bash-скрипт `run_whole_tests`

Программа реализована в нескольких версиях, каждая из которых демонстрирует различные способы организации 
взаимодействия между процессами с использованием каналов (pipes).

## Запуск программы

Для запуска программы из командной строки необходимо передать два аргумента: имя входного файла и имя выходного файла.
```bash
./<имя_исполняемого_файла> <имя_входного_файла> <имя_выходного_файла>
```
Для того, чтобы запустить тесты для всех директорий выполните 
```bash
cd ihw1
./run_whole_tests.
```
Если аргументы переданы неверно, программа выведет информационное сообщение о необходимом формате командной строки.

## Тестирование

Для тестирования программы необходимо предоставить набор (не менее пяти) текстовых файлов. 
Для каждого входного тестового файла должен быть представлен соответствующий выходной файл, 
полученный в результате работы программы.

Для того, чтобы запустить тесты для всех директорий выполните bash-скрипт `run_whole_tests`. Помимо этого реализованно 
автоматическое тестирование при запуске `./build_and_run_tests`. Данный скрипт компилирует исполняемый файл
и запускает тесты, также сверяет их с ожидаемым выводом.

## Реализации

### v_for_4 (4 балла)

Программа состоит из трех родственных процессов одной программы, взаимодействующих через неименованные каналы.

**Требования:**

1. **Процесс 1 (Чтение):** Читает текстовые данные размером не более 5000 байт из заданного входного файла 
с использованием системного вызова `read` и передает их второму процессу через неименованный канал.
2. **Канал fdReader:** Неименованный канал, передающий прочитанные данные от первого процесса ко второму.
3. **Процесс 2 (Обработка):** Получает данные из канала `fdReader`, осуществляет поиск и подсчет ключевых слов 
(`int`, `char`, `if`, `else`, `return`) в соответствии с заданием (Вариант 29), и передает результаты обработки третьему
процессу через неименованный канал. Размер буфера для хранения результатов обработки должен быть равен 5000 байт.
4. **Канал fdWriter:** Неименованный канал, передающий результаты обработки от второго процесса к третьему.
5. **Процесс 3 (Запись):** Получает обработанные данные размером не более 5000 байт из канала `fdWriter` и записывает их
в указанный выходной файл с использованием системного вызова `write`.
6. Для передачи имен входного и выходного файлов используются аргументы командной строки. Необходимо обеспечить вывод 
справки о формате командной строки при некорректном запуске.

### v_for_5 (5 баллов)

Программа состоит из трех родственных процессов одной программы, взаимодействующих через именованные каналы.

**Требования:**

1. **Канал first.fifo:** Именованный канал, создаваемый с помощью соответствующей функции (например, `mkfifo`), 
для передачи данных размером не более 5000 байт от первого процесса ко второму.
2. **Канал second.fifo:** Именованный канал, создаваемый с помощью соответствующей функции, для передачи результатов 
обработки размером не более 5000 байт от второго процесса к третьему.
3. **Процесс 1 (Чтение):** Читает данные из входного файла (не более 5000 байт) с использованием `read` и передает их 
во второй процесс через `first.fifo`.
4. **Процесс 2 (Обработка):** Получает данные из `first.fifo`, обрабатывает их (подсчитывает ключевые слова), и передает
результаты в третий процесс через `second.fifo`.
5. **Процесс 3 (Запись):** Получает обработанные данные из `second.fifo` и записывает их в выходной файл с 
использованием `write`.
6. Имена каналов и способ их создания должны быть указаны в отчете.
7. Для передачи имен файлов используются аргументы командной строки с выводом справки при ошибке.

### v_for_6 (6 баллов)

Программа состоит из двух родственных процессов одной программы, взаимодействующих через неименованные каналы.

**Требования:**

1. **Канал fdReaderHandler:** Неименованный канал, передающий текстовые данные размером не более 5000 байт из первого 
процесса во второй.
2. **Канал fdHandlerWriter:** Неименованный канал, передающий обработанные данные размером не более 5000 байт от второго
процесса обратно в первый.
3. **Процесс 1 (Обработка файлов):** Читает данные из входного файла (не более 5000 байт) с использованием `read`.
4. **Процесс 2 (Обработка строк):** Получает данные из `fdReaderHandler`, обрабатывает их (подсчитывает ключевые слова),
и передает результаты обратно в первый процесс через `fdHandlerWriter`.
5. **Процесс 1 (Обработка файлов):** Получает обработанные данные из `fdHandlerWriter` и записывает их в выходной файл 
с использованием `write`.
6. Для передачи имен файлов используются аргументы командной строки с выводом справки при ошибке.

### v_for_7 (7 баллов)

Программа состоит из двух родственных процессов одной программы, взаимодействующих через именованные каналы.

**Требования:**

1. **Канал first.fifo:** Именованный канал, создаваемый с помощью соответствующей функции, для передачи текстовых данных
размером не более 5000 байт из первого процесса во второй.
2. **Канал second.fifo:** Именованный канал, создаваемый с помощью соответствующей функции, для передачи обработанных 
данных размером не более 5000 байт от второго процесса обратно в первый.
3. **Процесс 1 (Обработка файлов):** Читает данные из входного файла (не более 5000 байт) с использованием `read` и 
передает их во второй процесс через `first.fifo`.
4. **Процесс 2 (Обработка строк):** Получает данные из `first.fifo`, обрабатывает их (подсчитывает ключевые слова), 
и передает результаты обратно в первый процесс через `second.fifo`.
5. **Процесс 1 (Обработка файлов):** Получает обработанные данные из `second.fifo` и записывает их в выходной файл 
с использованием `write`.
6. Имена каналов и способ их создания должны быть указаны в отчете.
7. Для передачи имен файлов используются аргументы командной строки с выводом справки при ошибке.

### v_for_8 (8 баллов)

Программный продукт состоит из двух независимых процессов и трех разных программ, взаимодействующих 
через именованные каналы.

**Требования:**

1. **Программа 1 (`reader.c`):** Читает текстовые данные размером не более 5000 байт из заданного входного файла с 
использованием `read` и передает их второму процессу через именованный канал `first.fifo`.
2. **Канал first.fifo:** Именованный канал, создаваемый с помощью соответствующей функции.
3. **Программа 2 (`processor.c`):** Получает данные из `first.fifo`, осуществляет обработку данных 
(подсчитывает ключевые слова), и передает результат обработки размером не более 5000 байт обратно первому процессу 
через именованный канал `second.fifo`.
4. **Канал second.fifo:** Именованный канал, создаваемый с помощью соответствующей функции.
5. **Программа 3 (`write.c`):** Получает обработанные данные из `second.fifo` и записывает их в указанный выходной 
файл с использованием `write`.
6. Для передачи имен файлов используются аргументы командной строки в каждой программе с выводом справки при ошибке.

## Дополнительные требования (применимы ко всем реализациям)
- Программы должны быть написаны на языке программирования C или C++ и выполняться в среде ОС Linux.
- При использовании C++ необходимо применять библиотеки языка C (запрещено использование стандартной библиотеки C++, 
включая потоки ввода-вывода).
- Процессы, осуществляющие ввод и вывод данных, не должны выполнять обработку данных. Обработка данных должна 
выполняться специальным процессом, которому данные передаются через каналы.
- Размеры буферов для пересылки данных через каналы (5000 байт для 4-8 баллов) ограничивают объем данных, 
передаваемых за один раз.